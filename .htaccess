RewriteEngine On
RewriteBase /sacith/

# RewriteBase /

# 1Ô∏è‚É£ Redirect da .php a URL pulito (opzionale)

RewriteCond %{THE_REQUEST} \s([a-z]{2}/product(-list)?)\.php [NC]
RewriteRule ^([a-z]{2}/product(-list)?)\.php$ /sacith/$1 [R=301,L]

# 2Ô∏è‚É£ family + subfamily + type + category (5 segmenti)

RewriteRule ^([a-z]{2})/product/([a-z0-9_-]+)/([a-z0-9_-]+)/([a-z0-9_-]+)/([a-z0-9_-]+)/?$ product-list.php?family=$2&subfamily=$3&type=$4&category=$5&lang=$1 [L,QSA]

# 3Ô∏è‚É£ whirlpool-system: family/subfamily/type (4 segmenti)

RewriteRule ^([a-z]{2})/product/hydromassage/whirlpool-system/([a-z0-9_-]+)/?$ product-list.php?family=hydromassage&subfamily=whirlpool-system&type=$2&lang=$1 [L,QSA]

# 4Ô∏è‚É£ shower-system: family/subfamily/category (4 segmenti)

RewriteRule ^([a-z]{2})/product/hydromassage/shower-system/([a-z0-9_-]+)/?$ product-list.php?family=hydromassage&subfamily=shower-system&category=$2&lang=$1 [L,QSA]

# 5Ô∏è‚É£ Altri subfamily generici ‚Üí family/subfamily (3 segmenti)

RewriteRule ^([a-z]{2})/product/([a-z0-9_-]+)/([a-z0-9_-]+)/?$ product-list.php?family=$2&subfamily=$3&lang=$1 [L,QSA]

# 6Ô∏è‚É£ Solo family (2 segmenti)

RewriteRule ^([a-z]{2})/product/([a-z0-9_-]+)/?$ product-list.php?family=$2&lang=$1 [L,QSA]

# üîπ Caso speciale: family/id/slug (es. shower-drains)

RewriteRule ^([a-z]{2})/product/([a-z0-9_-]+)/([0-9]+)/([^/]+)/?$ product-router.php?lang=$1&family=$2&id=$3&slug=$4 [L,QSA,NC]

# üîπ URL con type + ID + slug: family/subfamily/type/category/id/slug

RewriteRule ^([a-z]{2})/product/([a-z0-9_-]+)/([a-z0-9_-]+)/([a-z0-9_-]+)/([a-z0-9_-]+)/([0-9]+)/([^/]+)/?$ product-router.php?lang=$1&family=$2&subfamily=$3&type=$4&category=$5&id=$6&slug=$7 [L,QSA,NC]

# üîπ URL senza type: family/subfamily/category/id/slug

RewriteRule ^([a-z]{2})/product/([a-z0-9_-]+)/([a-z0-9_-]+)/([a-z0-9_-]+)/([0-9]+)/([^/]+)/?$ product-router.php?lang=$1&family=$2&subfamily=$3&category=$4&id=$5&slug=$6 [L,QSA,NC]

# 7Ô∏è‚É£ /it/product ‚Üí product.php

RewriteRule ^([a-z]{2})/product/?$ product.php [L,QSA]

# 1Ô∏è‚É£ Home ‚Üí index.php

RewriteRule ^([a-z]{2})/$ index.php [L,QSA]

# 2Ô∏è‚É£ Pagine SEO-friendly ‚Üí /pagina

RewriteRule ^([a-z]{2})/([a-z0-9_-]+)/?$ $2.php?lang=$1 [QSA,L]
